<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><title>深入理解 JavaScript 中的 delete 操作符 | bubkoo</title><meta name="author" content="bubkoo"><meta name="description" content="delete 操作符用于删除对象的属性。
似乎很多同学（包括我）对 delete 操作符都是似是而非，为什么有的属性可以被删除，有的却不能被删除？为什么能够删除对象的属性却不能删除变量或函数？在 eval 和 严格模式下，delete 操作符又有哪些特性？等等。。
本文将从基本概念到 ECMPScript 内部原理来学习 delete 操作符。
语法表达式
12delete object.property    // 点操作符方式，常用方式delete object['property'] // 字符串属性名方式
参数

object - 对象名称，或者返回一个对象的表达式
property - 将要删除的属性

返回值
delete 操作符返回 true 或 false。当被 delete 的对象的属性存在并且拥有 DontDelete (对象属性的一个内部属性，拥有该内部属性表明该属性不能被删除) 时返回 false（在严格模式下将抛出异常），否则返回 true。需要注意的是，对象属性不存在时也返回 true，所以返回值并非完全等同于删除成功与否。"><meta name="viewport" content="width=device-width,initial-scale=1"><meta property="og:title" content="深入理解 JavaScript 中的 delete 操作符"><meta property="og:site_name" content="bubkoo"><link href="/favicon.ico" rel="icon" type="image/x-ico"><link href="/atom.xml" rel="alternate" title="bubkoo" type="application/atom+xml"><link href="/css/style.css" rel="stylesheet" type="text/css" charset="utf-8"><link href="/fancybox/jquery.fancybox.css" rel="stylesheet" type="text/css" charset="utf-8"><script id="google_analytics">(function (window, document, src, ga) {

  window['GoogleAnalyticsObject'] = ga;

  if (!window[ga]) {
    window[ga] = function () {
      (window[ga].q = window[ga].q || []).push(arguments);
    };
  }

  window[ga].l = 1 * new Date();

  var thisTag = document.getElementById('google_analytics');
  var script  = document.createElement('script');

  script.async = true;
  script.src   = src;

  thisTag.parentNode.insertBefore(script, thisTag);

  setTimeout(function () {
    script.parentNode.removeChild(script);
    thisTag.parentNode.removeChild(thisTag);
  }, 100);

})(window, document, 'https://www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-78428859-2', 'auto');
ga('send', 'pageview');</script><script id="baidu_tongji">var _hmt = _hmt || [];
(function () {
  var script  = document.createElement('script');
  var thisTag = document.getElementById('baidu_tongji');

  script.src = '//hm.baidu.com/hm.js?49a1665c33b011585a2a629fdbed5b61';

  thisTag.parentNode.insertBefore(script, thisTag);

  setTimeout(function () {
    script.parentNode.removeChild(script);
    thisTag.parentNode.removeChild(thisTag);
  }, 100);
})();</script><!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--><script>__start__ = window.performance && performance.timing ? performance.timing.navigationStart : Date.now();</script></head><body><header id="header" hoot="default" hoot-rate="1" class="inner"><div class="f-left"><a href="/" class="site-title">bubkoo</a></div><nav class="f-right"><ul class="site-nav"><li><a href="/">&lt;&gt;</a></li><li><a href="/archives">Archives</a></li><li><a href="https://github.com/bubkoo">Github</a></li></ul></nav></header><div id="container" class="inner"><div id="main"><article class="article post"><div class="article-wrap"><header class="article-header"><span class="article-header-icon icon-black"></span><h1 class="article-header-title">深入理解 JavaScript 中的 delete 操作符</h1><time datetime="2014-01-23T16:26:07.000Z" itemprop="datePublished" class="article-header-time"><span class="day">23</span><span class="month">2014年01月</span></time></header><section class="article-content"><p>delete 操作符用于删除对象的属性。</p>
<p>似乎很多同学（包括我）对 delete 操作符都是似是而非，为什么有的属性可以被删除，有的却不能被删除？为什么能够删除对象的属性却不能删除变量或函数？在 eval 和 <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Strict_mode" target="_blank" rel="external">严格模式</a>下，delete 操作符又有哪些特性？等等。。</p>
<p>本文将从基本概念到 ECMPScript 内部原理来学习 delete 操作符。</p>
<h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><p><strong>表达式</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">delete</span> object.property    <span class="comment">// 点操作符方式，常用方式</span></div><div class="line"><span class="keyword">delete</span> object[<span class="string">'property'</span>] <span class="comment">// 字符串属性名方式</span></div></pre></td></tr></table></figure>
<p><strong>参数</strong></p>
<ul>
<li>object - 对象名称，或者返回一个对象的表达式</li>
<li>property - 将要删除的属性</li>
</ul>
<p><strong>返回值</strong></p>
<p>delete 操作符返回 true 或 false。当被 delete 的对象的属性存在并且拥有 DontDelete (对象属性的一个内部属性，拥有该内部属性表明该属性不能被删除) 时返回 false（在<a href="https://developer.mozilla.org/en-US/docs/JavaScript/Strict_mode" target="_blank" rel="external">严格模式</a>下将抛出异常），否则返回 true。需要注意的是，对象属性不存在时也返回 true，<em>所以返回值并非完全等同于删除成功与否</em>。</p>
<p><img src="http://bubkoo.qiniudn.com/delete-operator.jpg" alt=""></p>
<a id="more"></a>
<h2 id="delete-删除了什么"><a href="#delete-删除了什么" class="headerlink" title="delete 删除了什么"></a>delete 删除了什么</h2><p>delete 操作符用来删除对象的属性，这里所说的属性实际上是属性本身，而不是属性指向的对象（对于引用类型来说）。所以，对于引用类型的值，delete 删除了对象属性的本身，不会删除属性指向的对象。 </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;&#125;;</div><div class="line">o.x = <span class="keyword">new</span> <span class="built_in">Object</span>();</div><div class="line"><span class="keyword">delete</span> o.x;     <span class="comment">// 上一行new的Object对象依然存在</span></div><div class="line">o.x;            <span class="comment">// undefined，o的名为x的属性被删除了</span></div></pre></td></tr></table></figure>
<p>在实际的 JavaScrip t中，<code>delete o.x</code> 之后，Object 对象会由于失去了引用而被垃圾回收， 所以 <code>delete o.x</code> 也就“相当于”删除了 <code>o.x</code> 所指向的对象，但这个动作并不是 ECMAScript 标准，也就是说，即使某个实现完全不删除 Object 对象，也不算是违反 ECMAScript 标准。</p>
<p>下面代码说明了 delete 只删除属性本身，而不会删除属性所指的对象：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;&#125;;</div><div class="line"><span class="keyword">var</span> a = &#123; <span class="attr">x</span>: <span class="number">10</span> &#125;;</div><div class="line">o.a = a;</div><div class="line"><span class="keyword">delete</span> o.a;    <span class="comment">// o.a属性被删除</span></div><div class="line">o.a;           <span class="comment">// undefined</span></div><div class="line">a.x;           <span class="comment">// 10, 因为&#123; x: 10 &#125; 对象依然被 a 引用，所以不会被回收</span></div></pre></td></tr></table></figure>
<p>虽然是一个小小的 delete 操作符，其行为却异常复杂。</p>
<p>为什么我们能删除一个对象的属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</div><div class="line"><span class="keyword">delete</span> x.a; <span class="comment">// true</span></div><div class="line">x.a; <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<p>但却不能删除一个变量：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> x; <span class="comment">// false;</span></div><div class="line">x; <span class="comment">// 1</span></div></pre></td></tr></table></figure>
<p>也不能删除一个函数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">x</span>(<span class="params"></span>) </span>&#123; &#125;;</div><div class="line"><span class="keyword">delete</span> x; <span class="comment">// false;</span></div><div class="line"><span class="keyword">typeof</span> x; <span class="comment">// "function"</span></div></pre></td></tr></table></figure>
<p>要知道其中的原委，我们需要先了解一些基本概念。</p>
<h2 id="代码类型"><a href="#代码类型" class="headerlink" title="代码类型"></a>代码类型</h2><p>在 ECMAScript 中，有 3 种不同类型的可执行代码：</p>
<ol>
<li>全局代码 (Global code) - 当一段源代码被看成程序 (Program) 时，它将会在全局作用域内执行，并且被认为是全局代码。在浏览器环境中，脚本元素的内容通常被解释为程序，因此被作为全局代码来执行。</li>
<li>函数代码 (Function code) - 在一段函数中直接执行的代码就被认为是一段函数代码，在浏览器环境下，节点的事件属性（如 <code>&lt;a onclick=&quot;...&quot;</code>）通常都作为函数代码来解析和执行。</li>
<li>Eval代码 (Eval code) - 被内置函数 <code>eval</code> 执行的代码文本被解释成 Eval 代码</li>
</ol>
<h2 id="执行上下文-execution-context"><a href="#执行上下文-Execution-context" class="headerlink" title="执行上下文 (Execution context)"></a>执行上下文 (Execution context)</h2><p>代码的执行都是在特定的执行上下文中进行的，对于以上三种代码类型都有一个执行上下文与其对应。比如，当一个函数被执行时，程序控制就进入了函数代码执行上下文；当一段全局代码被执行时，程序控制就进入了全局代码执行上下文，等等。</p>
<p>执行上下文在逻辑上是一个栈（stack）。首先可能有一段全局代码，它拥有属于自己的执行上下文；在这段代码中可能调用一个函数，这个函数同样拥有属于自己的执行上下文；这个函数可能调用另一个函数，等等。即使当函数递归调用自己时，在每一步调用中仍然进入了不同的执行上下文。</p>
<p>执行上下文与作用域链和闭包等概念息息相关，欲深入了解执行上下文可以查阅作用域链和闭包的相关资料。</p>
<h2 id="活动对象-activation-object-变量对象-variable-object"><a href="#活动对象-Activation-object-变量对象-Variable-Object" class="headerlink" title="活动对象 (Activation object) / 变量对象 (Variable Object)"></a>活动对象 (Activation object) / 变量对象 (Variable Object)</h2><p>每个执行上下文都有一个与之相关联的<strong>变量对象 (Variable object)</strong>，在某个执行上下文中申明的变量和函数将被当着属性 (properties) 附加到这个变量对象上面。</p>
<p>当在全局代码的执行上下文时，全局对象 (Global object) 成为当前执行上下文的变量对象，在浏览器中就是 window 对象。因此，声明的全局函数和变量就成为全局对象的属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* this 指代全局对象 */</span></div><div class="line"><span class="keyword">var</span> GLOBAL_OBJECT = <span class="keyword">this</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> foo = <span class="number">1</span>;</div><div class="line">GLOBAL_OBJECT.foo; <span class="comment">// 1</span></div><div class="line">foo === GLOBAL_OBJECT.foo; <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"><span class="keyword">typeof</span> GLOBAL_OBJECT.bar; <span class="comment">// "function"</span></div><div class="line">GLOBAL_OBJECT.bar === bar; <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>局部变量（那些在函数代码中定义的变量）是怎么样的呢？当在函数代码的执行上下文时，<strong>活动对象 (Activation object)</strong> 成为当前执行上下文中的变量对象，在函数代码中申明的变量和函数成为活动对象的属性，并且函数的参数（形参名为属性名）和 Arguments 对象（arguments 为属性名）也将成为活动对象的属性。</p>
<p>注意，活动对象只是一个内部描述机制，在程序代码中不能直接访问。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">foo</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> bar = <span class="number">2</span>;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">baz</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">    <span class="comment">/*</span></div><div class="line">        抽象的过程</div><div class="line"></div><div class="line">        'arguments' 对象成为所在函数的活化对象的属性：</div><div class="line">        ACTIVATION_OBJECT.arguments = arguments;</div><div class="line"></div><div class="line">        ...参数 'foo' 也是一样：</div><div class="line">        ACTIVATION_OBJECT.foo; // 1</div><div class="line"></div><div class="line">        ...变量 'bar' 也是一样：</div><div class="line">        ACTIVATION_OBJECT.bar; // 2</div><div class="line"></div><div class="line">        ...函数 'baz' 也是一样：</div><div class="line">        typeof ACTIVATION_OBJECT.baz; // "function"</div><div class="line">    */</div><div class="line">&#125;)(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<p>在 eval 代码中申明的变量会根据 eval 所在的执行上下文来确定变量将成为哪个变量对象的属性。例如：</p>
<p>在全局环境中执行 eval，那么变量将成为全局对象的属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> GLOBAL_OBJECT = <span class="keyword">this</span>;</div><div class="line"><span class="built_in">eval</span>(<span class="string">'var foo = 1'</span>);</div><div class="line">GLOBAL_OBJECT.foo; <span class="comment">// 1;</span></div></pre></td></tr></table></figure>
<p>在函数作用域中执行 eval，变量将成为活动对象的属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> GLOBAL_OBJECT = <span class="keyword">this</span>;</div><div class="line"></div><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">eval</span>(<span class="string">'var bar = 2;'</span>);</div><div class="line"></div><div class="line">    <span class="comment">/*</span></div><div class="line">    抽象过程</div><div class="line">    ACTIVATION_OBJECT.bar; // 1</div><div class="line">    */</div><div class="line">&#125;)();</div><div class="line"></div><div class="line"><span class="comment">// 全局环境下不能访问 bar</span></div><div class="line"><span class="keyword">this</span>.bar <span class="comment">// undefined</span></div></pre></td></tr></table></figure>
<h2 id="属性的内部属性"><a href="#属性的内部属性" class="headerlink" title="属性的内部属性"></a>属性的内部属性</h2><p>我们马上就接近本文主题了，从上面我们知道声明的变量成了变量对象（全局对象或活动对象）的属性，同时每个属性都可以拥有一个或多个内部属性：<code>ReadOnly</code>、<code>DontEnum</code>、<code>DontDelete</code> 和 <code>Internal</code>。这里我们关注的是 <code>DontDelete</code> 这个内部属性，拥有这个内部属性的变量表明该变量不能使用 delete 操作符删除。</p>
<p><strong>当被声明的变量和函数成为变量对象的属性时，这些属性在创建时就带上了 DontDelete 这个内部属性</strong>。然而，<strong>任何显式/隐式赋值的属性不生成 DontDelete</strong>。这就是为什么我们能够删除一些属性，但有的却不能删除。</p>
<p>上面的分析可能不好理解，直接看下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> GLOBAL_OBJECT = <span class="keyword">this</span>;</div><div class="line"></div><div class="line"><span class="comment">/* 'foo' 是全局对象的一个属性，</span></div><div class="line">    它通过变量声明而生成，因此拥有内部属性 DontDelete</div><div class="line">    这就是为什么它不能被删除</div><div class="line">*/</div><div class="line"><span class="keyword">var</span> foo = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> foo; <span class="comment">// false</span></div><div class="line"><span class="keyword">typeof</span> foo; <span class="comment">// "number"</span></div><div class="line"></div><div class="line"><span class="comment">/* 'bar' 是全局对象的一个属性，</span></div><div class="line">    它通过变量声明而生成，因此拥有 DontDelete</div><div class="line">    这就是为什么它同样不能被删除</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"><span class="keyword">delete</span> bar; <span class="comment">// false</span></div><div class="line"><span class="keyword">typeof</span> bar; <span class="comment">// "function"</span></div><div class="line"></div><div class="line"><span class="comment">/* 'baz' 也是全局对象的一个属性，</span></div><div class="line">    然而，它通过属性赋值而生成，因此没有DontDelete</div><div class="line">    这就是为什么它可以被删除</div><div class="line">*/</div><div class="line">GLOBAL_OBJECT.baz = <span class="string">"baz"</span>;</div><div class="line"><span class="keyword">delete</span> GLOBAL_OBJECT.baz; <span class="comment">// true</span></div><div class="line"><span class="keyword">typeof</span> GLOBAL_OBJECT.baz; <span class="comment">// "undefined"</span></div></pre></td></tr></table></figure>
<h2 id="内置对象和dontdelete"><a href="#内置对象和DontDelete" class="headerlink" title="内置对象和DontDelete"></a>内置对象和DontDelete</h2><p>所以，某些属性不能被删除的<strong>根本原因在于：这些属性拥有内部属性 <code>DontDelete</code></strong>，该内部属性控制着该属性是否可以被删除。注意：内置对象的一些属性拥有内部属性 <code>DontDelete</code>，因此不能被删除； 特殊的 arguments 变量（活化对象的属性）拥有 <code>DontDelete</code>； 任何函数实例的 length (返回形参长度)属性也拥有 <code>DontDelete</code>： </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//不能删除'arguments'，因为有DontDelete</span></div><div class="line">    <span class="keyword">delete</span> <span class="built_in">arguments</span>; <span class="comment">// false;</span></div><div class="line">    <span class="keyword">typeof</span> <span class="built_in">arguments</span>; <span class="comment">// "object"</span></div><div class="line"></div><div class="line">    <span class="comment">//也不能删除函数的'length',因为有DontDelete</span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line">    <span class="keyword">delete</span> f.length; <span class="comment">// false;</span></div><div class="line">    <span class="keyword">typeof</span> f.length; <span class="comment">// "number"</span></div><div class="line">&#125;) ();</div></pre></td></tr></table></figure>
<p>与函数 arguments 相关联的属性也拥有 DontDelete，同样不能被删除：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">foo, bar</span>) </span>&#123;</div><div class="line">    <span class="keyword">delete</span> foo; <span class="comment">// false</span></div><div class="line">    foo; <span class="comment">// 1</span></div><div class="line"></div><div class="line">    <span class="keyword">delete</span> bar; <span class="comment">// false</span></div><div class="line">    bar; <span class="comment">// "bah"</span></div><div class="line">&#125;) (<span class="number">1</span>, <span class="string">"bah"</span>);</div></pre></td></tr></table></figure>
<h2 id="未声明的变量赋值"><a href="#未声明的变量赋值" class="headerlink" title="未声明的变量赋值"></a>未声明的变量赋值</h2><p>我们知道，直接给未声明的变量赋值会成为全局对象的属性，除非这一属性在作用域链内的其他地方被找到。而我们之前提到过，属性赋值和变量声明的区别：后者生成 <code>DontDelete</code> 而前者不生成，这也就是为什么未声明的变量赋值可以被删除。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> GLOBAL_OBJECT = <span class="keyword">this</span>;</div><div class="line"></div><div class="line"><span class="comment">/* 通过变量声明生成全局对象的属性，拥有 DontDelete */</span></div><div class="line"><span class="keyword">var</span> foo = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="comment">/* 通过未声明的变量赋值生成全局对象的属性，没有 DontDelete */</span></div><div class="line">bar = <span class="number">2</span>;</div><div class="line"></div><div class="line"><span class="keyword">delete</span> foo; <span class="comment">// false</span></div><div class="line"><span class="keyword">delete</span> bar; <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>注意：内部属性是在属性生成时确定的，之后的赋值过程不会改变已有的属性的内部属性。理解这点非常重要。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 'foo'创建的同时生成 DontDelete */</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;&#125;;</div><div class="line"></div><div class="line"><span class="comment">/* 之后的赋值过程不改变已有属性的内部属性，DontDelete仍然存在 */</span></div><div class="line">foo = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> foo; <span class="comment">// false;</span></div><div class="line"><span class="keyword">typeof</span> foo; <span class="comment">// "number"</span></div><div class="line"></div><div class="line"><span class="comment">/* 但赋值一个不存在的属性时，创建了一个没有内部属性的属性，因此没有 DontDelete */</span></div><div class="line"><span class="keyword">this</span>.bar = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> bar; <span class="comment">// true;</span></div><div class="line"><span class="keyword">typeof</span> bar; <span class="comment">// "undefined"</span></div></pre></td></tr></table></figure>
<h2 id="原型中声明的属性和对象自带的属性"><a href="#原型中声明的属性和对象自带的属性" class="headerlink" title="原型中声明的属性和对象自带的属性"></a>原型中声明的属性和对象自带的属性</h2><p>原型 prototype 中声明的属性和对象自带的属性(其实这些属性也是在原型 prototype 中的)可以认为是带有 DontDelete 特性的，无法被删除。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//原型中声明的属性无法被删除</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">C</span>(<span class="params"></span>) </span>&#123; <span class="keyword">this</span>.x = <span class="number">42</span>; &#125;</div><div class="line">C.prototype.x = <span class="number">12</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> C();</div><div class="line">o.x;     <span class="comment">// 42, 构造函数中定义的o.x</span></div><div class="line"></div><div class="line"><span class="keyword">delete</span> o.x;</div><div class="line">o.x;     <span class="comment">// 12,  prototype中定义的o.x，即使再次执行delete o.x也不会被删除</span></div><div class="line"></div><div class="line"><span class="comment">//对象自带的属性无法被删除</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> re = <span class="regexp">/abc/i</span>;</div><div class="line"><span class="keyword">delete</span> re.ignoreCase;</div><div class="line">re.ignoreCase; <span class="comment">// true, ignoreCase无法删除</span></div></pre></td></tr></table></figure>
<h2 id="eval-和-firebug-控制台"><a href="#Eval-和-Firebug-控制台" class="headerlink" title="Eval 和 Firebug 控制台"></a>Eval 和 Firebug 控制台</h2><p><strong>在 console 中的所有文本都会被当做 eval 代码来解析和执行，而不是全局或函数代码。</strong>我之前说过，eval 在处理变量声明时有一个特殊的行为：<strong>在 eval 中声明的变量事实上没有 DontDelete 属性</strong>。所以，下面声明的所有变量最后都没有 DontDelete 这个内部属性，所以它们都能被删除。所以要小心普通的全局代码和 Firebug 控制台中代码的区别。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">eval</span>(<span class="string">'var foo = 1;'</span>);</div><div class="line">foo; <span class="comment">// 1</span></div><div class="line"><span class="keyword">delete</span> foo; <span class="comment">// true</span></div><div class="line"><span class="keyword">typeof</span> foo; <span class="comment">// "undefined"</span></div></pre></td></tr></table></figure>
<p>在函数代码中也是一样：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">eval</span>(<span class="string">'var foo = 1;'</span>);</div><div class="line">    foo; <span class="comment">// 1</span></div><div class="line">    <span class="keyword">delete</span> foo; <span class="comment">// true</span></div><div class="line">    <span class="keyword">typeof</span> foo; <span class="comment">// "undefined"</span></div><div class="line">&#125;) ();</div></pre></td></tr></table></figure>
<p>但是这也有一点<strong>例外</strong>，在 eval 代码中的函数内部通过 <code>var</code> 定义的变量具有 DontDelete，不能被删除。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">eval</span>(<span class="string">"(function() &#123; var x = 42; delete x; return x; &#125;)();"</span>);</div><div class="line"><span class="comment">// 返回 42</span></div></pre></td></tr></table></figure>
<h2 id="浏览器兼容性"><a href="#浏览器兼容性" class="headerlink" title="浏览器兼容性"></a>浏览器兼容性</h2><p>了解事物的工作原理是重要的，但实际的实现情况更重要。浏览器在创建和删除变量/属性时都遵守这些标准吗？ 对于大部分来说，是的。</p>
<p>这里有一个<a href="http://kangax.github.com/jstests/delete_compliance_test/" target="_blank" rel="external">简单的测试集</a>来检查全局代码、函数代码和 Eval 代码的遵守情况。 测试单元同时检测了 delete 操作的返回值和属性是否像预期那样被删除。delete 的返回值并不像它的实际结果那样重要，delete 操作返回 true 或 false 并不重要， 重要的是拥有/没有 DontDelete 的属性是否被删除。</p>
<p>现代浏览器总的来说还是遵守删除规则的，以下浏览器全部通过测试： Opera 7.54+，Firefox 1.0+，Safari 3.1.2+，Chrome 4+。</p>
<p>Safari 2.x 和 3.0.4 在删除函数 arguments 时存在问题，似乎这些属性在创建时不带 DontDelete，因此可以被删除。Safari 2.x 还有其他问题——删除无引用时（例如 delete 1）抛出错误（译者按：IE 同样有）；函数声明生成了可删除的属性（奇怪的是变量声明则正常）；eval 中的变量声明变成不可删除（而 eval 中的函数声明则正常）。</p>
<p>与 Safari 类似，Konqueror（3.5，而非4.3）在 delete 无引用和删除 arguments 是也存在同样问题。</p>
<p><strong>Gecko DontDelete bug</strong><br>Gecko 1.8.x 浏览器—— Firefox 2.x, Camino 1.x, Seamonkey 1.x, etc. ——存在一个有趣的 bug：显式赋值值给一个属性能移除它的 DontDelete，即使该属性通过变量或函数声明而生成。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; &#125;;</div><div class="line"><span class="keyword">delete</span> foo; <span class="comment">// false;</span></div><div class="line"><span class="keyword">typeof</span> foo; <span class="comment">// "function"</span></div><div class="line"></div><div class="line"><span class="keyword">this</span>.foo = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> foo; <span class="comment">// true</span></div><div class="line"><span class="keyword">typeof</span> foo; <span class="comment">// "undefined"</span></div></pre></td></tr></table></figure>
<p>令人惊讶的是，IE5.5-8 也通过了绝大部分测试，除了删除非引用抛出错误（e.g. delete 1，就像旧的 Safari）。 但是，虽然不能马上发现，事实上 IE 存在更严重的 bug，这些 bug 是关于全局对象。</p>
<h2 id="ie-bugs"><a href="#IE-bugs" class="headerlink" title="IE bugs"></a>IE bugs</h2><p>在 IE 中（至少在 IE6-8 中），下面的表达式抛出异常（在全局代码中）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.x = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> x; <span class="comment">// TypeError: Object doesn't support this action</span></div></pre></td></tr></table></figure>
<p>下面则是另一个：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x =<span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> <span class="keyword">this</span>.x; <span class="comment">// TypeError: Cannot delete 'this.x'</span></div><div class="line"><span class="comment">// 译者按：在IE8下抛出此异常，在IE6,7下抛出的是和上面一样的异常</span></div></pre></td></tr></table></figure>
<p>这似乎说明，在 IE 中在<strong>全局代码中的变量声明并没有生成全局对象的同名属性</strong>。 通过赋值创建的属性（this.x = 1）然后通过 delete x 删除时抛出异常； 通过变量声明（var x = 1）创建的属性然后通过 delete this.x 删除时抛出另一个（译者按：在 IE6,7 下错误信息与上面的相同）。</p>
<p>但不只是这样，事实上通过显式赋值创建的属性<strong>在删除时总是抛出异常</strong>。 这不只是一个错误，而是创建的属性看上去拥有了 DontDelete 内部属性，而按规则应该是没有的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.x = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> <span class="keyword">this</span>.x; <span class="comment">// TypeError: Object doesn't support this action</span></div><div class="line"><span class="keyword">delete</span> x; <span class="comment">// TypeError: Object doesn't support this action</span></div></pre></td></tr></table></figure>
<p>另一方面，未声明的变量赋值（那些同样生成全局对象的属性）又确实在IE下能够正常删除：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> x; <span class="comment">// true</span></div></pre></td></tr></table></figure>
<p>但如果你试图通过 this 关键字来进行删除（delete this.x），那么上面的异常又将抛出：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x = <span class="number">1</span>;</div><div class="line"><span class="keyword">delete</span> <span class="keyword">this</span>.x; <span class="comment">//TypeError: Cannot delete 'this.x'</span></div></pre></td></tr></table></figure>
<p>如果归纳一下，我们将发现在全局代码中 <code>delete this.x</code> 永远不会成功。当通过显式赋值来生成属性（this.x = 1）时抛出一个异常； 当通过声明/非声明变量的方式（var x = 1 or x = 1）生成属性时抛出另一个异常。而另一方面，delete x 只有在显示赋值生成属性(this.x = 1)时才抛出异常。</p>
<h2 id="宿主对象host-object"><a href="#宿主对象-Host-Object" class="headerlink" title="宿主对象(Host Object)"></a>宿主对象(Host Object)</h2><p>小小总结一下 delete 操作符：</p>
<ol>
<li>如果操作数不是引用类型，则返回 <code>true</code></li>
<li>如果对象没有同名的<strong>直接属性</strong>，返回 <code>true</code> （对象可以是活动对象或全局对象）</li>
<li>如果属性存在但是有 DontDelete 特性, 返回 <code>false</code></li>
<li>其它情况，删除属性并且返回 <code>true</code></li>
</ol>
<p>然而，<strong>对于宿主对象（host object）的 delete 操作的行为却可能是不可预料的</strong>。</p>
<p>我们已经看到了在IE中的一些问题：当删除某些对象（那些实现为了宿主对象）属性时抛出异常。 一些版本的 firefox 当试图删除 window.location 时抛出异常（译者按：IE 同样抛出）。 同样，在一些宿主对象中你也不能相信 delete 的返回值， 例如下面发生在 firefox 中的(译者按：chrome 中同样结果；IE 中抛出异常；opera 和 safari 允许删除，并且删除后无法调用，姑且算’正常‘，尽管，从下面的讨论来看似乎却是不正常的，它们事实上删除了不能删除的属性，而前面的浏览器没有)：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 'alert'是’window‘的一个直接属性（如果我们能够相信'hasOwnProperty'） */</span></div><div class="line"><span class="built_in">window</span>.hasOwnProperty(<span class="string">'alert'</span>); <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="keyword">delete</span> <span class="built_in">window</span>.alert; <span class="comment">// true</span></div><div class="line"><span class="keyword">typeof</span> <span class="built_in">window</span>.alert; <span class="comment">// "function"</span></div></pre></td></tr></table></figure>
<p><code>delete window.alert</code> 返回 <code>true</code>，尽管这个属性没有任何条件可能产生这个结果（按照上面的算法）：它解析为一个引用，因此不能在第一步返回 <code>true</code>；它是 window 对象的直接属性，因此不能在第二步返回 true；唯一能返回 true 的是当算法达到最后一步同时确实删除这个属性，而事实上它并没有被删除。（译者按：不，在 opera 和 safari 中确实被删除了…）。</p>
<p>所以这个故事告诉我们永远不要相信宿主对象。</p>
<h2 id="es5-严格模式"><a href="#ES5-严格模式" class="headerlink" title="ES5 严格模式"></a>ES5 严格模式</h2><p>在 ES5 严格模式下，当删除操作指向一个变量/函数参数/函数声明的直接引用时抛出 SyntaxError。 此外，如果属性拥有内部属性 [[Configurable]] == false，将抛出 TypeError：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">(function(foo) &#123;</div><div class="line">    "use strict"; //在函数中开启严格模式</div><div class="line"></div><div class="line">    var bar;</div><div class="line">    function baz;</div><div class="line">    delete foo; // SyntaxError，当删除函数参数时</div><div class="line">    delete bar; // SyntaxError，当删除变量时</div><div class="line">    delete baz; // SyntaxError，当删除由函数声明创建的变量时</div><div class="line"></div><div class="line">    /* function实例的length拥有[[Configurable]] : false */</div><div class="line">    delete (function() &#123;&#125;).length; // TypeError</div><div class="line">&#125;) ();</div></pre></td></tr></table></figure>
<p>而且，在严格模式下，删除未声明的变量（换句话说，未解析的引用），同样抛出 SyntaxError；同时，在严格模式下未声明的赋值也将抛出异常 ReferenceError：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">"use strict"</span>;</div><div class="line"><span class="keyword">delete</span> i_dont_exist; <span class="comment">// SyntaxError</span></div><div class="line"></div><div class="line">i_dont_exist_either = <span class="number">1</span>; <span class="comment">// ReferenceError</span></div></pre></td></tr></table></figure>
<p>看了之前给出的变量、函数声明和参数的例子，相信现在你也理解了，所有这些限制都是有其意义的。严格模式采取了更积极的和描述性的措施，而不只是忽略这些问题。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>下面是对于 JavaScript 中 delete 操作是如何工作的简短的总结：</p>
<ul>
<li>变量和函数声明都是活化对象(Activation Object) 或全局对象(Global Object)的属性</li>
<li>属性拥有内部属性，其中 DontDelete 这个内部属性负责确定一个属性是否能够被删除</li>
<li>在<strong>全局或者函数代码</strong>中的变量和函数声明总是创建<strong>带有 DontDelete 特性</strong>的属性</li>
<li><strong>函数参数</strong>总是活动对象的属性, 并且<strong>带有 DontDelete</strong></li>
<li>在 <strong>Eval 代码</strong>中声明的变量和函数总是创建<strong>不带 DontDelete 特性</strong> 的属性</li>
<li><strong>新的未声明的属性</strong>在生成时带空的内部属性，因此也<strong>不带 DontDelete 特性</strong></li>
<li>永远不要相信<strong>宿主对象</strong>对 delete 操作做出的反应</li>
</ul>
<p>如果你想要对这里所描述的东西更加熟悉的话，请参阅 <a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf" target="_blank" rel="external">ECMA-262 3rd edition specification</a>。</p>
<h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete?redirectlocale=en-US&amp;redirectslug=JavaScript%2FReference%2FOperators%2Fdelete#section_5" target="_blank" rel="external">MDN &gt; Web technology for developers &gt; JavaScript &gt; JavaScript reference &gt; Operators &gt; delete</a></li>
<li><a href="http://perfectionkills.com/understanding-delete/" target="_blank" rel="external">Perfection Kills: Understanding delete</a></li>
<li><a href="http://www.ituring.com.cn/article/7620" target="_blank" rel="external">理解delete</a></li>
<li><a href="http://blog.charlee.li/javascript-variables-and-delete-operator/" target="_blank" rel="external">Javascript的变量与delete操作符</a></li>
<li><a href="http://www.css88.com/archives/5137" target="_blank" rel="external">Javascript中的delete操作符</a></li>
</ul></section><footer class="article-footer clearfix"><div class="tags"><a href="/tags/javascript/" title="JavaScript">JavaScript</a> <a href="/tags/delete/" title="delete">delete</a></div></footer></div><nav class="article-nav clearfix"><a href="/2014/01/19/angular/make-your-own-angular-part-1-scopes-and-digest/" class="article-nav-link article-nav-newer"><strong class="article-nav-type">Newer</strong><span class="article-nav-title">【译】构建您自己的 AngularJS，第一部分：scopes 和 digest</span></a><a href="/2014/02/07/mongodb-authentication/" class="article-nav-link article-nav-older"><strong class="article-nav-type">Older</strong><span class="article-nav-title">MongoDB 用户和身份验证</span></a></nav></article><section id="article-comment" class="article-comment"><div data-thread-key="http://bubkoo.com/2014/01/23/deep-in-delete/" data-title="深入理解 JavaScript 中的 delete 操作符" data-url="http://bubkoo.com/2014/01/23/deep-in-delete/" class="ds-thread"></div></section></div><aside id="sidebar" role="sidebar"><div class="widget tagcloud"><h3 class="widget-title">标签</h3><div class="widget-content"><a href="/tags/aop/" style="font-size: 10px">AOP</a> <a href="/tags/algorithm/" style="font-size: 18.33px">Algorithm</a> <a href="/tags/analysis/" style="font-size: 10px">Analysis</a> <a href="/tags/angularjs/" style="font-size: 15px">AngularJS</a> <a href="/tags/animation/" style="font-size: 10px">Animation</a> <a href="/tags/architecture/" style="font-size: 16.67px">Architecture</a> <a href="/tags/archives/" style="font-size: 10.83px">Archives</a> <a href="/tags/async/" style="font-size: 12.5px">Async</a> <a href="/tags/backbone/" style="font-size: 10px">Backbone</a> <a href="/tags/browsers/" style="font-size: 10px">Browsers</a> <a href="/tags/css/" style="font-size: 12.5px">CSS</a> <a href="/tags/css3/" style="font-size: 10px">CSS3</a> <a href="/tags/closure/" style="font-size: 10.83px">Closure</a> <a href="/tags/closures/" style="font-size: 10px">Closures</a> <a href="/tags/cookies/" style="font-size: 10px">Cookies</a> <a href="/tags/cross-domain/" style="font-size: 10px">Cross Domain</a> <a href="/tags/custom-elements/" style="font-size: 10.83px">Custom Elements</a> <a href="/tags/d3/" style="font-size: 10px">D3</a> <a href="/tags/debounce/" style="font-size: 10px">Debounce</a> <a href="/tags/debug/" style="font-size: 10.83px">Debug</a> <a href="/tags/dependency/" style="font-size: 10px">Dependency</a> <a href="/tags/document/" style="font-size: 10px">Document</a> <a href="/tags/ecma-262-3/" style="font-size: 15.83px">ECMA-262-3</a> <a href="/tags/ecmascript/" style="font-size: 15.83px">ECMAScript</a> <a href="/tags/es6/" style="font-size: 20px">ES6</a> <a href="/tags/errors/" style="font-size: 10px">Errors</a> <a href="/tags/essential/" style="font-size: 10px">Essential</a> <a href="/tags/evaluation-strategy/" style="font-size: 10px">Evaluation strategy</a> <a href="/tags/event/" style="font-size: 10px">Event</a> <a href="/tags/exceptions/" style="font-size: 10px">Exceptions</a> <a href="/tags/express/" style="font-size: 10px">Express</a> <a href="/tags/flip/" style="font-size: 10px">FLIP</a> <a href="/tags/flexbox/" style="font-size: 10px">Flexbox</a> <a href="/tags/funarg/" style="font-size: 10px">Funarg</a> <a href="/tags/gist/" style="font-size: 10px">Gist</a> <a href="/tags/github/" style="font-size: 10px">Github</a> <a href="/tags/guide/" style="font-size: 10px">Guide</a> <a href="/tags/html/" style="font-size: 10px">HTML</a> <a href="/tags/http/" style="font-size: 10px">HTTP</a> <a href="/tags/hexo/" style="font-size: 10.83px">Hexo</a> <a href="/tags/ie/" style="font-size: 10px">IE</a> <a href="/tags/iife/" style="font-size: 10px">IIFE</a> <a href="/tags/jshint/" style="font-size: 10px">JSHint</a> <a href="/tags/javascript/" style="font-size: 19.17px">JavaScript</a> <a href="/tags/leak/" style="font-size: 10px">Leak</a> <a href="/tags/linting/" style="font-size: 10px">Linting</a> <a href="/tags/mvc/" style="font-size: 10px">MVC</a> <a href="/tags/methodology/" style="font-size: 10px">Methodology</a> <a href="/tags/mock/" style="font-size: 10px">Mock</a> <a href="/tags/modular/" style="font-size: 10px">Modular</a> <a href="/tags/mongodb/" style="font-size: 10px">MongoDB</a> <a href="/tags/oop/" style="font-size: 10.83px">OOP</a> <a href="/tags/partial-application/" style="font-size: 10px">Partial Application</a> <a href="/tags/pattern/" style="font-size: 10px">Pattern</a> <a href="/tags/patterns/" style="font-size: 10px">Patterns</a> <a href="/tags/performance/" style="font-size: 14.17px">Performance</a> <a href="/tags/promise/" style="font-size: 13.33px">Promise</a> <a href="/tags/prototype/" style="font-size: 11.67px">Prototype</a> <a href="/tags/quality/" style="font-size: 10px">Quality</a> <a href="/tags/quiz/" style="font-size: 10px">Quiz</a> <a href="/tags/regex/" style="font-size: 10px">Regex</a> <a href="/tags/requirejs/" style="font-size: 10px">RequireJS</a> <a href="/tags/sass/" style="font-size: 10px">SASS</a> <a href="/tags/svg/" style="font-size: 10px">SVG</a> <a href="/tags/scope/" style="font-size: 10.83px">Scope</a> <a href="/tags/shapes/" style="font-size: 10px">Shapes</a> <a href="/tags/shuffle/" style="font-size: 10px">Shuffle</a> <a href="/tags/sort/" style="font-size: 17.5px">Sort</a> <a href="/tags/source-map/" style="font-size: 10.83px">Source Map</a> <a href="/tags/styling/" style="font-size: 10px">Styling</a> <a href="/tags/sublime-text/" style="font-size: 10px">Sublime Text</a> <a href="/tags/template/" style="font-size: 10px">Template</a> <a href="/tags/throttle/" style="font-size: 10px">Throttle</a> <a href="/tags/timing/" style="font-size: 10px">Timing</a> <a href="/tags/tools/" style="font-size: 12.5px">Tools</a> <a href="/tags/variable-object/" style="font-size: 10px">Variable object</a> <a href="/tags/visualizations/" style="font-size: 10px">Visualizations</a> <a href="/tags/when/" style="font-size: 12.5px">When</a> <a href="/tags/delete/" style="font-size: 10px">delete</a> <a href="/tags/execution-context/" style="font-size: 10px">execution context</a> <a href="/tags/fetch/" style="font-size: 10px">fetch</a> <a href="/tags/function/" style="font-size: 10px">function</a> <a href="/tags/nodejs/" style="font-size: 10px">nodejs</a> <a href="/tags/nodemon/" style="font-size: 10px">nodemon</a> <a href="/tags/npm/" style="font-size: 10px">npm</a> <a href="/tags/nvm/" style="font-size: 10px">nvm</a> <a href="/tags/performance/" style="font-size: 10px">performance</a> <a href="/tags/prebrowsing/" style="font-size: 10px">prebrowsing</a> <a href="/tags/prefetching/" style="font-size: 10px">prefetching</a> <a href="/tags/preloading/" style="font-size: 10px">preloading</a> <a href="/tags/tabindex/" style="font-size: 10px">tabindex</a> <a href="/tags/this/" style="font-size: 10px">this</a> <a href="/tags/ui-router/" style="font-size: 14.17px">ui-router</a></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-content"><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/01/18/debouncing-throttling-explained-examples/">实例解析防抖和节流函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/08/quick-tip-multiple-versions-node-nvm/">使用 nvm 管理不同版本的 node 与 npm</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/08/15-ways-to-write-self-documenting-javascript/">如何编写更加自解释的代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/31/high-performance-animations/">使用 FLIP 来提高 Web 动画的性能</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/28/styling-broken-images/">定制图片加载失败时的样式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/26/delivering-octicons-with-svg/">使用 SVG 输出 Octicon</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/18/how-to-use-npm-as-a-build-tool/">如何将 npm 作为构建工具使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/24/what-you-can-do-with-gists-on-github/">任何人都可以使用到的 Gist 服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/19/prefetching-preloading-prebrowsing/">前端性能优化 - 资源预加载</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/18/es6-in-depth-the-future/">深入解析 ES6：未来展望</a></li></ul></div></div></aside><aside id="topic-wrap" class="toc-wrap f-right"><h3 class="toc-wrap-title">内容</h3><div class="toc-tree"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#语法"><span class="toc-number">1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#delete-删除了什么"><span class="toc-number">2.</span> <span class="toc-text">delete 删除了什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#代码类型"><span class="toc-number">3.</span> <span class="toc-text">代码类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#执行上下文-execution-context"><span class="toc-number">4.</span> <span class="toc-text">执行上下文 (Execution context)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#活动对象-activation-object-变量对象-variable-object"><span class="toc-number">5.</span> <span class="toc-text">活动对象 (Activation object) / 变量对象 (Variable Object)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#属性的内部属性"><span class="toc-number">6.</span> <span class="toc-text">属性的内部属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内置对象和dontdelete"><span class="toc-number">7.</span> <span class="toc-text">内置对象和DontDelete</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#未声明的变量赋值"><span class="toc-number">8.</span> <span class="toc-text">未声明的变量赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#原型中声明的属性和对象自带的属性"><span class="toc-number">9.</span> <span class="toc-text">原型中声明的属性和对象自带的属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#eval-和-firebug-控制台"><span class="toc-number">10.</span> <span class="toc-text">Eval 和 Firebug 控制台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#浏览器兼容性"><span class="toc-number">11.</span> <span class="toc-text">浏览器兼容性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ie-bugs"><span class="toc-number">12.</span> <span class="toc-text">IE bugs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#宿主对象host-object"><span class="toc-number">13.</span> <span class="toc-text">宿主对象(Host Object)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#es5-严格模式"><span class="toc-number">14.</span> <span class="toc-text">ES5 严格模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">15.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资源"><span class="toc-number">16.</span> <span class="toc-text">参考资源</span></a></li></ol></div><div class="toc-progress"></div></aside></div><footer id="footer" class="inner"><span class="copyright">© 2017 bubkoo</span><span class="theme">@<a href="https://github.com/bubkoo/hexo-theme-formula" target="_blank">formula</a></span></footer><img id="go2top" src="/images/top_arrow.png" alt="go2top"><script charset="utf-8" src="/js/lib/jquery-2.1.3.min.js"></script><script charset="utf-8" src="/js/lib/jquery.imagesloaded.min.js"></script><script charset="utf-8" src="/fancybox/jquery.fancybox.pack.js"></script><script charset="utf-8" src="/js/lib/sea.js"></script><script charset="utf-8" src="/js/main.js"></script><script id="redundancy3">var duoshuoQuery = { short_name: 'bubkoo' };
(function () {
  var ds = document.createElement('script');

  ds.type    = 'text/javascript';
  ds.async   = true;
  ds.src     = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';

  (document.getElementsByTagName('head')[0]
  || document.getElementsByTagName('body')[0]).appendChild(ds);

  ds.parentNode.removeChild(ds);

  var script = document.getElementById('redundancy3');
  script && script.parentNode.removeChild(script);
})();</script></body></html>