<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><title>黑色小鸟 - 前端分层架构 | bubkoo</title><meta name="author" content="bubkoo"><meta name="description" content="介绍一群恶魔的猪从无辜的小鸟那里偷走了所有的前端架构，现在它们要夺回来。一对特工英雄（愤怒的小鸟）将攻击那些卑鄙的猪，直到夺回属于他们的前端架构。（译者注：本系列是关乎前端架构的讨论，作者借用当前最风靡的游戏 - 愤怒的小鸟，为我们揭开了前端架构的真实面目。）
小鸟们最终能取得胜利吗？它们会战胜那些满身培根味的敌人吗？让我们一起来揭示 JavaScript 之愤怒的小鸟系列的另一个扣人心弦的章节！

阅读本系列的介绍文章，查看所有小鸟以及它们的进攻力量。

战况
红色大鸟 - 立即调用的函数表达式
蓝色小鸟 - 事件
黄色小鸟 - 模块化、依赖管理、性能优化

黑色小鸟的攻击力
在这篇文章中，我们将看看黑色小鸟，它们使用 Backbone.js 的组织方式，用炸弹进攻肥小猪们。慢慢的，小鸟们将一个接一个地夺回本属于他们的东西。"><meta name="viewport" content="width=device-width,initial-scale=1"><meta property="og:title" content="黑色小鸟 - 前端分层架构"><meta property="og:site_name" content="bubkoo"><link href="/favicon.ico" rel="icon" type="image/x-ico"><link href="/atom.xml" rel="alternate" title="bubkoo" type="application/atom+xml"><link href="/css/style.css" rel="stylesheet" type="text/css" charset="utf-8"><link href="/fancybox/jquery.fancybox.css" rel="stylesheet" type="text/css" charset="utf-8"><script id="google_analytics">(function (window, document, src, ga) {

  window['GoogleAnalyticsObject'] = ga;

  if (!window[ga]) {
    window[ga] = function () {
      (window[ga].q = window[ga].q || []).push(arguments);
    };
  }

  window[ga].l = 1 * new Date();

  var thisTag = document.getElementById('google_analytics');
  var script  = document.createElement('script');

  script.async = true;
  script.src   = src;

  thisTag.parentNode.insertBefore(script, thisTag);

  setTimeout(function () {
    script.parentNode.removeChild(script);
    thisTag.parentNode.removeChild(thisTag);
  }, 100);

})(window, document, 'https://www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-78428859-2', 'auto');
ga('send', 'pageview');</script><script id="baidu_tongji">var _hmt = _hmt || [];
(function () {
  var script  = document.createElement('script');
  var thisTag = document.getElementById('baidu_tongji');

  script.src = '//hm.baidu.com/hm.js?49a1665c33b011585a2a629fdbed5b61';

  thisTag.parentNode.insertBefore(script, thisTag);

  setTimeout(function () {
    script.parentNode.removeChild(script);
    thisTag.parentNode.removeChild(thisTag);
  }, 100);
})();</script><!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--><script>__start__ = window.performance && performance.timing ? performance.timing.navigationStart : Date.now();</script></head><body><header id="header" hoot="default" hoot-rate="1" class="inner"><div class="f-left"><a href="/" class="site-title">bubkoo</a></div><nav class="f-right"><ul class="site-nav"><li><a href="/">&lt;&gt;</a></li><li><a href="/archives">Archives</a></li><li><a href="https://github.com/bubkoo">Github</a></li></ul></nav></header><div id="container" class="inner"><div id="main"><article class="article post"><div class="article-wrap"><header class="article-header"><span class="article-header-icon icon-black"></span><h1 class="article-header-title">黑色小鸟 - 前端分层架构</h1><time datetime="2014-03-29T15:28:40.000Z" itemprop="datePublished" class="article-header-time"><span class="day">29</span><span class="month">2014年03月</span></time></header><section class="article-content"><p><img src="http://bubkoo.qiniudn.com/angry-birds-of-javascript-black-bird-backbone.jpg" alt=""></p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>一群恶魔的猪从无辜的小鸟那里偷走了所有的前端架构，现在它们要夺回来。一对特工英雄（愤怒的小鸟）将攻击那些卑鄙的猪，直到夺回属于他们的前端架构。（译者注：本系列是关乎前端架构的讨论，作者借用当前最风靡的游戏 - 愤怒的小鸟，为我们揭开了前端架构的真实面目。）</p>
<p>小鸟们最终能取得胜利吗？它们会战胜那些满身培根味的敌人吗？让我们一起来揭示 JavaScript 之愤怒的小鸟系列的另一个扣人心弦的章节！</p>
<blockquote>
<p>阅读本系列的<a href="http://bubkoo.com/2014/03/28/angry-birds-of-javascript-series/">介绍文章</a>，查看所有小鸟以及它们的进攻力量。</p>
</blockquote>
<h2 id="战况"><a href="#战况" class="headerlink" title="战况"></a>战况</h2><ul>
<li><a href="http://bubkoo.com/2014/03/28/angry-birds-of-javascript-red-bird-iife/">红色大鸟 - 立即调用的函数表达式</a></li>
<li><a href="http://bubkoo.com/2014/03/28/angry-birds-of-javascript-blue-bird-events/">蓝色小鸟 - 事件</a></li>
<li><a href="http://bubkoo.com/2014/03/29/angry-birds-of-javascript-yellow-bird-requirejs/">黄色小鸟 - 模块化、依赖管理、性能优化</a></li>
</ul>
<h2 id="黑色小鸟的攻击力"><a href="#黑色小鸟的攻击力" class="headerlink" title="黑色小鸟的攻击力"></a>黑色小鸟的攻击力</h2><p><img src="http://bubkoo.qiniudn.com/angry-birds-black-bird.png" alt="black bird"></p>
<p>在这篇文章中，我们将看看黑色小鸟，它们使用 Backbone.js 的组织方式，用炸弹进攻肥小猪们。慢慢的，小鸟们将一个接一个地夺回本属于他们的东西。</p>
<a id="more"></a>
<h2 id="猪猪偷走了什么"><a href="#猪猪偷走了什么" class="headerlink" title="猪猪偷走了什么"></a>猪猪偷走了什么</h2><p>小鸟们从曾经写出来的 jQuery 代码就像蠕虫大杂烩那样乱成一团，它们将视图、模型和展现逻辑的代码混淆在一起。后来，它们的其中一个祖先，一只黑色小鸟，引入了 Backbone.js，并向它们演示了一种不同的方式来开发前端应用。但是，在小猪最近的一次进攻中，小猪们从小鸟那里偷走了 Backbone.js，并带回了它们肮脏的猪圈。</p>
<p>其中一只黑色小鸟被指派去夺回被偷去的东西，为了夺回属于它们的东西，它将使用具有爆炸性力量的组织结构来帮助它摧毁猪群。</p>
<h2 id="乱成一团的蠕虫大杂烩"><a href="#乱成一团的蠕虫大杂烩" class="headerlink" title="乱成一团的蠕虫大杂烩"></a>乱成一团的蠕虫大杂烩</h2><p>我们再来看看下面的应用，在上次<a href="http://draft.blogger.com/blogger.g?blogID=30404818" target="_blank" rel="external">蓝色小鸟</a>进攻中已经处理过，之前通过增加消息来理清混乱，这里我们将使用 Backbone.js 来达到同样的目的，下面是程序运行结果…</p>
<blockquote>
<p>现在貌似 <a href="http://plnkr.co/" target="_blank" rel="external">Plunker</a> 不能正确地嵌入在页面上，该应用是一个简单的 Netflix 搜索入口，返回 Netflix 的搜索结果。如果 Plunker 失效，我将把这个 demo  移到别处，抱歉带来不便。</p>
</blockquote>
<iframe allowfullscreen="allowfullscreen" frameborder="0" src="http://embed.plnkr.co/td1ZTtptDT0RIxc7VIgM" style="height: 300px; width: 100%"></iframe>

<p>为了再次唤起你的记忆，下面再次贴出了该应用的实现代码。你会发现代码将许多关注点都混在一起了（DOM事件，视图更新，AJAX交互，等等）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">$( <span class="built_in">document</span> ).on( <span class="string">"click"</span>, <span class="string">".term"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>) </span>&#123;</div><div class="line">    e.preventDefault();</div><div class="line">    $( <span class="string">"input"</span> ).val( $( <span class="keyword">this</span> ).text() );</div><div class="line">    $( <span class="string">"button"</span> ).trigger( <span class="string">"click"</span> );</div><div class="line">&#125;);</div><div class="line"> </div><div class="line">$( <span class="built_in">document</span> ).ready( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;  </div><div class="line">    $( <span class="string">"button"</span> ).on( <span class="string">"click"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> searchTerm = $( <span class="string">"input"</span> ).val();</div><div class="line">        <span class="keyword">var</span> url = <span class="string">"http://odata.netflix.com/Catalog/Titles?$filter=substringof('"</span> +</div><div class="line">                <span class="built_in">escape</span>( searchTerm ) + <span class="string">"',Name)&amp;$callback=callback&amp;$format=json"</span>;</div><div class="line">        </div><div class="line">        $( <span class="string">".help-block"</span> ).html( <span class="function"><span class="keyword">function</span>(<span class="params"> index, html </span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> e.originalEvent ? html + <span class="string">", "</span> + <span class="string">"&lt;a href='#' class='term'&gt;"</span> +</div><div class="line">                searchTerm + <span class="string">"&lt;/a&gt;"</span> : html;</div><div class="line">        &#125;);</div><div class="line">        </div><div class="line">        $.ajax(&#123;</div><div class="line">            <span class="attr">dataType</span>: <span class="string">"jsonp"</span>,</div><div class="line">            <span class="attr">url</span>: url,</div><div class="line">            <span class="attr">jsonpCallback</span>: <span class="string">"callback"</span>,</div><div class="line">            <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> data </span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> rows = [];</div><div class="line">                $.each( data.d.results, <span class="function"><span class="keyword">function</span>(<span class="params"> index, result </span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> row = <span class="string">""</span>;</div><div class="line">                    <span class="keyword">if</span> ( result.Rating &amp;&amp; result.ReleaseYear ) &#123;</div><div class="line">                        row += <span class="string">"&lt;td&gt;"</span> + result.Name + <span class="string">"&lt;/td&gt;"</span>;</div><div class="line">                        row += <span class="string">"&lt;td&gt;"</span> + result.Rating + <span class="string">"&lt;/td&gt;"</span>;</div><div class="line">                        row += <span class="string">"&lt;td&gt;"</span> + result.ReleaseYear + <span class="string">"&lt;/td&gt;"</span>;</div><div class="line">                        row = <span class="string">"&lt;tr&gt;"</span> + row + <span class="string">"&lt;/tr&gt;"</span>;</div><div class="line">                        rows.push( row );</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line">                $( <span class="string">"table"</span> ).show().find( <span class="string">"tbody"</span> ).html( rows.join( <span class="string">""</span> ) );</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        e.preventDefault();</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>你发现问题了吗？很容易写出像上面那样的代码，但我希望你能发现，这样的代码使用和维护起来都将令人难以忍受。别担心，我们都曾写过那样的代码。好消息是，我们不必接着那样写代码。让我们来看看 Backbone.js 到底是什么，以及它是如何帮助我们解决上述问题的。</p>
<blockquote>
<p>还有很多其他前端 MV* 框架（Knockout、AngularJS、EmberJS以及其他）可以结构化上面的代码。我鼓励你选择一个工具，并熟练使用它。</p>
</blockquote>
<h2 id="backbonejs-基础"><a href="#Backbone-js-基础" class="headerlink" title="Backbone.js 基础"></a>Backbone.js 基础</h2><p>Backbone.js 有一些组件，他们可以协同来创建一个 web 应用，你不必都用上这些组件，但你想用时它们都是可用的。</p>
<ul>
<li>Model - 代表数据以及相关逻辑</li>
<li>Collection - 模型的有序集合</li>
<li>View - 依赖模型，并含有渲染方法的模块</li>
<li>Router - 提供可链接和可分享 URL 的机制</li>
<li>Event - 观察者事件模块</li>
<li>History - 提供操作历史的功能（支持后退按钮）</li>
<li>Sync - 可扩展组件，提供与服务器端 RESTful 风格的通信</li>
</ul>
<h2 id="重构紧耦合的代码"><a href="#重构紧耦合的代码" class="headerlink" title="重构紧耦合的代码"></a>重构紧耦合的代码</h2><p>让我们尝试重构上面混乱的 jQuery 代码，使用 Backbone.js 将我们的关注点分离开。</p>
<p>本文不会深入介绍上面的所有组件，重点会放在 3 个主要的组件（Models，Collections 和 Views），同时涉及到一些 Sync 组件，但是是作为其他主题的一部分。如果你想深入研究这些主题，可以参考文章末尾我列举的一些资源。</p>
<h3 id="requirejs"><a href="#RequireJS" class="headerlink" title="RequireJS"></a>RequireJS</h3><p>在进入讨论 Models，Collections 和 Views 之前，我想演示如何使用 RequireJS  来帮助我们将 index.html 页面中脚本文件都移除。</p>
<blockquote>
<p>如果你从未接触过 RequireJS，你可以参考 <a href="http://bubkoo.com/2014/03/29/angry-birds-of-javascript-yellow-bird-requirejs/">黄色小鸟 - RequireJS</a> 这篇关于 RequireJS 的文章。</p>
</blockquote>
<h4 id="mainjs"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">    <span class="attr">paths</span>: &#123;</div><div class="line">        <span class="attr">jquery</span>: <span class="string">"https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min"</span>,</div><div class="line">        <span class="attr">underscore</span>: <span class="string">"http://underscorejs.org/underscore"</span>,</div><div class="line">        <span class="attr">backbone</span>: <span class="string">"http://backbonejs.org/backbone"</span>,</div><div class="line">        <span class="attr">postal</span>: <span class="string">"http://cdnjs.cloudflare.com/ajax/libs/postal.js/0.8.2/postal.min"</span>,</div><div class="line">        <span class="attr">bootstrap</span>: <span class="string">"http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.0/js/bootstrap.min"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">shim</span>: &#123;</div><div class="line">        <span class="attr">underscore</span>: &#123;</div><div class="line">            <span class="attr">exports</span>: <span class="string">"_"</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">backbone</span>: &#123;</div><div class="line">            <span class="attr">deps</span>: [ <span class="string">"jquery"</span>, <span class="string">"underscore"</span> ],</div><div class="line">            <span class="attr">exports</span>: <span class="string">"Backbone"</span></div><div class="line">        &#125;,</div><div class="line">        <span class="attr">bootstrap</span>: &#123;</div><div class="line">            <span class="string">"deps"</span> : [ <span class="string">"jquery"</span> ]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"> </div><div class="line"><span class="built_in">require</span>( [ <span class="string">"jquery"</span>, <span class="string">"search-view"</span>, <span class="string">"search"</span>, <span class="string">"movie-view"</span>, <span class="string">"movies"</span> ], </div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"> $, SearchView, Search, MovieView, Movies </span>) </span>&#123;</div><div class="line">        $( <span class="built_in">document</span> ).ready( <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">var</span> searchView = <span class="keyword">new</span> SearchView(&#123;</div><div class="line">                <span class="attr">el</span>: $( <span class="string">"#search"</span> ),</div><div class="line">                <span class="attr">model</span>: <span class="keyword">new</span> Search()</div><div class="line">            &#125;);</div><div class="line">            </div><div class="line">            <span class="keyword">var</span> movieView = <span class="keyword">new</span> MovieView(&#123;</div><div class="line">                <span class="attr">el</span>: $( <span class="string">"#output"</span> ),</div><div class="line">                <span class="attr">collection</span>: <span class="keyword">new</span> Movies()</div><div class="line">            &#125;);</div><div class="line">        &#125;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>上面代码定义了  jQuery、Underscore、Backbone、Postal 和     Bootstrap 的路径，需要给 Underscore、Backbone 和 Bootstrap 设置垫片（shim），因为它们不是 AMD 模块。</p>
<p>调用 <code>require</code> 方法来加载依赖项，回调执行时，jQuery 和 其他依赖的模型和视图都已经加载好。</p>
<h3 id="模型"><a href="#模型" class="headerlink" title="模型"></a>模型</h3><p>我们将创建 2 个模型（Seach 和 Movie）来表示上面的应用。</p>
<p>下面的 Search 模型相当简单，它的主要任务是响应 <code>term</code> 属性的变化。我们使用 Backbone 的事件（观察者事件）来监听模型的变化，然后传播消息到 Postal.js（媒介事件）。关于这些术语的更多信息以及它们的不同之处，可以参考关于事件的<a href="http://bubkoo.com/2014/03/28/angry-birds-of-javascript-blue-bird-events/">愤怒的蓝色小鸟</a>一文。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">define( [ <span class="string">"backbone"</span>, <span class="string">"channels"</span> ], <span class="function"><span class="keyword">function</span>(<span class="params"> Backbone, channels </span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> Model = Backbone.Model.extend(&#123;</div><div class="line">        <span class="attr">initialize</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">this</span>.on( <span class="string">"change:term"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> model, value </span>) </span>&#123;</div><div class="line">                channels.bus.publish( <span class="string">"search.term.changed"</span>, &#123; <span class="attr">term</span>: value &#125; );</div><div class="line">            &#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> Model;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>下面的 Movie 模型也没有处理很多事情，它的主要目的是解析服务器返回的数据，并把结果映射为更易于管理的结构。这样我们只需要关心 releaseYear、rating 和 name 属性。</p>
<h4 id="moviejs"><a href="#movie-js" class="headerlink" title="movie.js"></a>movie.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">efine( [ <span class="string">"backbone"</span> ], <span class="function"><span class="keyword">function</span>(<span class="params"> Backbone </span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> Model = Backbone.Model.extend(&#123;</div><div class="line">        <span class="attr">defaults</span>: &#123; <span class="attr">term</span>: <span class="string">""</span> &#125;,</div><div class="line">        <span class="attr">parse</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> data, xhr </span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> &#123;</div><div class="line">                <span class="attr">releaseYear</span>: data.ReleaseYear,</div><div class="line">                <span class="attr">rating</span>: data.Rating,</div><div class="line">                <span class="attr">name</span>: data.Name</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> Model;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h3><p>正如上面描述的那样，集合是一组模型，下面代码就是一组 Movie 模型。集合定义了从服务器获取模型的服务器地址，该应用的后端是 Netflix，它的入口稍微有点复杂，所以我们定义了一函数来动态创建服务器的 URL。同时，我们还定义了一个 <code>parse</code> 方法，它将直接返回映射到 <code>Movie</code> 模型的数组。由于这个 AJAX 用到了 JSONP，我们还需要重写 <code>sync</code> 方法提供一些额外的选项。  </p>
<h4 id="moviesjs"><a href="#movies-js" class="headerlink" title="movies.js"></a>movies.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">define( [ <span class="string">"backbone"</span>, <span class="string">"movie"</span> ], <span class="function"><span class="keyword">function</span>(<span class="params"> Backbone, Movie </span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> Collection = Backbone.Collection.extend(&#123;</div><div class="line">        <span class="attr">model</span>: Movie,</div><div class="line">        <span class="attr">url</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"http://odata.netflix.com/Catalog/Titles?$filter=substringof('"</span> +</div><div class="line">                <span class="built_in">escape</span>( <span class="keyword">this</span>.term ) + <span class="string">"',Name)&amp;$callback=callback&amp;$format=json"</span>;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">parse</span> : <span class="function"><span class="keyword">function</span>(<span class="params"> data, xhr </span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> data.d.results;</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">sync</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> method, model, options </span>) </span>&#123;  </div><div class="line">            options.dataType = <span class="string">"jsonp"</span>;  </div><div class="line">            options.jsonpCallback = <span class="string">"callback"</span>;</div><div class="line">            </div><div class="line">            <span class="keyword">return</span> Backbone.sync( method, model, options );  </div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line">    <span class="keyword">return</span> Collection;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>与传统的 MVC 中的视图相比，我认为这里的视图更加。不管怎么样，这个应用有 2 个视图，我们简要地看看。</p>
<p><code>SearchView</code> 视图处理 DOM 和模型之间的交互。<code>events</code> 属性主要用来绑定 DOM 事件，在这个应用中监听了按钮的点击事件和之前搜索链接的点击事件，搜索链接的改变将被记录在模型的 <code>term</code> 属性中。<code>initialize</code> 方法为 <code>term</code> 属性改变设置了事件监听，如果 <code>term</code> 发生改变，对应的 UI 将发生改变。  </p>
<h4 id="search-viewjs"><a href="#search-view-js" class="headerlink" title="search-view.js"></a>search-view.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">define( [ <span class="string">"jquery"</span>, <span class="string">"backbone"</span>, <span class="string">"underscore"</span>, <span class="string">"channels"</span> ], </div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"> $, Backbone </span>) </span>&#123;</div><div class="line"> </div><div class="line">        <span class="keyword">var</span> View = Backbone.View.extend(&#123;</div><div class="line">            <span class="attr">events</span>: &#123;</div><div class="line">                <span class="string">"click button"</span>: <span class="string">"searchByInput"</span>,</div><div class="line">                <span class="string">"click .term"</span>: <span class="string">"searchByHistory"</span></div><div class="line">            &#125;,</div><div class="line">            <span class="attr">initialize</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.model.on( <span class="string">"change"</span>, <span class="keyword">this</span>.updateHistory, <span class="keyword">this</span> );</div><div class="line">                <span class="keyword">this</span>.model.on( <span class="string">"change"</span>, <span class="keyword">this</span>.updateInput, <span class="keyword">this</span> );</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">searchByInput</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>) </span>&#123;</div><div class="line">                e.preventDefault();</div><div class="line">                </div><div class="line">                <span class="keyword">this</span>.model.set( <span class="string">"term"</span>, <span class="keyword">this</span>.$( <span class="string">"input"</span> ).val() );</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">searchByHistory</span>: <span class="function"><span class="keyword">function</span>(<span class="params"> e </span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> text = $( e.target ).text();</div><div class="line">                </div><div class="line">                <span class="keyword">this</span>.model.set( <span class="string">"term"</span>, text );</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">updateHistory</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">                </div><div class="line">                <span class="keyword">this</span>.$el.find( <span class="string">".help-block"</span> ).html( <span class="function"><span class="keyword">function</span>(<span class="params">index, html</span>) </span>&#123;</div><div class="line">                    <span class="keyword">var</span> term = that.model.get( <span class="string">"term"</span> );</div><div class="line">                    </div><div class="line">                    <span class="keyword">return</span> ~html.indexOf( term ) ? html : </div><div class="line">                        html + <span class="string">", "</span> + <span class="string">"&lt;a href='#' class='term'&gt;"</span> + term + <span class="string">"&lt;/a&gt;"</span>;</div><div class="line">                &#125;);</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">updateInput</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">this</span>.$el.find( <span class="string">"input"</span> ).val( <span class="keyword">this</span>.model.get(<span class="string">"term"</span>) );    </div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"> </div><div class="line">        <span class="keyword">return</span> View;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p><code>MovieView</code> 视图与上面的视图有些许不一样。第一点要指出的就是奇怪的 <code>text!movie-template.html</code> 依赖，我使用了  RequireJS 的 <code>text.js</code> 插件，该插件允许将将文本资源作为依赖项的一部分加载。这对于使用文本文件的场景非常有用，比如模板引擎中的模板文件，或与某个组件对应的 CSS 文件。在 <code>initialize</code> 方法中，我们订阅了 <code>term</code> 的改变事件，当发生改变时通知集合从服务器 <code>fetch</code> 新数据，当数据从服务器返回时，<code>render</code> 方法将被调用，在 <code>render</code> 方法中我们使用 <code>Underscore</code> 的模板引擎来将结果渲染到页面中。   </p>
<h4 id="movie-viewjs"><a href="#movie-view-js" class="headerlink" title="movie-view.js"></a>movie-view.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">define( [ <span class="string">"jquery"</span>, <span class="string">"backbone"</span>, <span class="string">"underscore"</span>, <span class="string">"channels"</span>, <span class="string">"text!movie-template.html"</span> ], </div><div class="line">    <span class="function"><span class="keyword">function</span>(<span class="params"> $, Backbone, _, channels, template </span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> View = Backbone.View.extend(&#123;</div><div class="line">            <span class="attr">template</span>: _.template( template ),</div><div class="line">            <span class="attr">initialize</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">                </div><div class="line">                _.bindAll( <span class="keyword">this</span>, <span class="string">"render"</span> );                </div><div class="line">                channels.bus.subscribe( <span class="string">"search.term.changed"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"> data </span>) </span>&#123;</div><div class="line">                    that.collection.term = data.term;</div><div class="line">                    that.collection.fetch(&#123;</div><div class="line">                        <span class="attr">success</span>: that.render</div><div class="line">                    &#125;);</div><div class="line">                &#125;);</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">render</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">                <span class="keyword">var</span> html = <span class="keyword">this</span>.template(&#123; <span class="attr">movies</span>: <span class="keyword">this</span>.collection.toJSON() &#125;);</div><div class="line">                <span class="keyword">this</span>.$el.show().find( <span class="string">"tbody"</span> ).html( html );</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    </div><div class="line">        <span class="keyword">return</span> View;</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>下面就是你想知道的模板文件，我使用的是 Underscore 的模板引擎，该引擎与 John 多年之前写的 micro-templating 非常相似。还有一些其他的模板库，我使用这个引擎，是因为它是 Underscore 内置的模板引擎，并且 Underscore 是 Backbone 的依赖项，如果想有更多的特性，我会使用 Handlebars 来代替，单这是关于愤怒的小鸟的另一个故事了。</p>
<h4 id="movie-templatehtml"><a href="#movie-template-html" class="headerlink" title="movie-template.html"></a>movie-template.html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">_.each</span>( <span class="attr">movies</span>, <span class="attr">function</span>( <span class="attr">movie</span> ) &#123; %&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">movie.name</span> %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">movie.rating</span> %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">movie.releaseYear</span> %&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> &#125;); %&gt;</span></div></pre></td></tr></table></figure>
<h2 id="附加资源"><a href="#附加资源" class="headerlink" title="附加资源"></a>附加资源</h2><p>本文只涉及到了 Backbone.js 的皮毛，如果你想了解更多关于 Backbone.js，下面这些资源你也许用的上。</p>
<blockquote>
<p>下面这些资源来源于 <a href="http://www.elijahmanor.com/2013/01/beginner-html5-javascript-jquery.html" target="_blank" rel="external">Beginner HTML5, JavaScript, jQuery, Backbone, and CSS3 Resources</a> 这篇博文。</p>
</blockquote>
<ul>
<li><a href="http://backbonejs.org/" target="_blank" rel="external">Backbone.js API</a></li>
<li><a href="http://backbonejs.org/docs/backbone.html" target="_blank" rel="external">Annotated Backbone.js Code</a></li>
<li><a href="https://github.com/documentcloud/backbone/wiki/Extensions,-Plugins,-Resources" target="_blank" rel="external">Backbone Extensions, Plugins, &amp; Resources</a></li>
<li><a href="https://github.com/tbranyen/backbone-boilerplate" target="_blank" rel="external">Backbone Boilerplate</a></li>
<li><a href="https://github.com/addyosmani/backbone-fundamentals" target="_blank" rel="external">Backbone Fundamentals eBook</a> by Addy Osmani (<a href="http://twitter.com/addyosmani" target="_blank" rel="external">@addyosmani</a>)</li>
<li><a href="https://peepcode.com/products/backbone-js" target="_blank" rel="external">Peep Code: Backbone.js Video Series</a> by Geoffery Grosenbach (<a href="http://twitter.com/topfunky" target="_blank" rel="external">@topfunky</a>) and David Goodlad (<a href="http://twitter.com/dgoodlad" target="_blank" rel="external">@dgoodlad</a>)</li>
<li><a href="http://pragprog.com/screencasts/v-dback/hands-on-backbone-js" target="_blank" rel="external">The Pragmatic Bookshelf: Hands-on Backbone.js</a> by Derick Bailey (<a href="http://twitter.com/derickbailey" target="_blank" rel="external">@derickbailey</a>)</li>
<li><a href="http://backbonescreencasts.com/" target="_blank" rel="external">Backbone.js Screencasts</a> by Joey Beninghove</li>
<li><a href="http://www.pluralsight.com/training/Courses/TableOfContents/backbone-fundamentals" target="_blank" rel="external">Pluralsight: Backbone.js Fundamentals</a> by Liam McLennan (<a href="http://twitter.com/liammclennan" target="_blank" rel="external">@liammclennan</a>)</li>
<li><a href="http://codular.com/starting-with-backbone" target="_blank" rel="external">The Skinny on BackboneJS</a> by Ben Howdle (<a href="http://twitter.com/benhowdle" target="_blank" rel="external">@benhowdle</a>)</li>
<li><a href="http://backbonetutorials.com/" target="_blank" rel="external">Backbone Tutorials</a></li>
<li><a href="http://net.tutsplus.com/tag/backbone/" target="_blank" rel="external">Backbone.js Tutorials</a> via Nettuts</li>
<li><a href="http://javascriptplayground.com/blog/category/backbonejs" target="_blank" rel="external">Exploring Backbone.js Series</a> by Jack Franklin (<a href="http://twitter.com/jack_franklin" target="_blank" rel="external">@jack_franklin</a>)</li>
</ul>
<h2 id="进攻"><a href="#进攻" class="headerlink" title="进攻"></a>进攻</h2><p>下面是一个用 <a href="http://incompl.github.com/boxbox/" target="_blank" rel="external">boxbox</a> 构建的简版 Angry Birds，boxbox 是一个用于 <a href="https://code.google.com/p/box2dweb/" target="_blank" rel="external">box2dweb</a> 的物理学框架，由 <a href="http://bocoup.com/" target="_blank" rel="external">Bocoup</a> 的 <a href="http://twitter.com/_gsmith" target="_blank" rel="external">Greg Smith</a> 编写。</p>
<blockquote>
<p>按下空格键来发射黄色小鸟，你也可以使用方向键。</p>
</blockquote>
<p><img src="http://bubkoo.qiniudn.com/angry-birds-of-javascript-black-bird-backbone-attack.png" alt=""></p>
<h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>前端 web 应用很容易就变得复杂，如果你不小心，那么你的代码就可能在不知不觉间变得混乱起来。幸好有了 Backbone.js 提供的各种组件，来帮助我们将应用分为可用的、包含各自目的的模块。感谢黑色小鸟为小鸟们夺回了 Backbone，这样它们就可以更早休息，因为它们知道在应用的适当地方，被有条理的组织了起来。</p>
<p>还有很多其他的前端架构技术也被猪偷走了。接下来，另一只愤怒的小鸟将继续复仇！Dun, dun, daaaaaaa!</p>
<p class="j-quote">原文：<a href="http://www.elijahmanor.com/angry-birds-of-javascript-black-bird-backbone/" target="_blank" rel="external">Angry Birds of JavaScript- Black Bird: Backbone</a></p></section><footer class="article-footer clearfix"><div class="categories"><a href="/categories/javascript/" title="JavaScript">JavaScript</a></div><div class="tags"><a href="/tags/architecture/" title="Architecture">Architecture</a> <a href="/tags/backbone/" title="Backbone">Backbone</a></div></footer></div><nav class="article-nav clearfix"><a href="/2014/04/14/angry-birds-of-javascript-white-bird-linting/" class="article-nav-link article-nav-newer"><strong class="article-nav-type">Newer</strong><span class="article-nav-title">白色小鸟 - 代码质量和代码分析</span></a><a href="/2014/03/29/angry-birds-of-javascript-yellow-bird-requirejs/" class="article-nav-link article-nav-older"><strong class="article-nav-type">Older</strong><span class="article-nav-title">黄色小鸟 - 模块化、依赖管理、性能优化</span></a></nav></article><section id="article-comment" class="article-comment"></section><link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"><script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var options = {
  owner: 'bubkoo',
  repo:  'bubkoo.github.com',
  oauth: {
    client_id: '13c9fa4a27f96e5296bf',
    client_secret: 'd0f07fcf8605a22de1e57fd96ddb0666d2ce0751',
  }
};
var gitment = new Gitment(options);
gitment.render('article-comment')</script></div><aside id="sidebar" role="sidebar"><div class="widget tagcloud"><h3 class="widget-title">标签</h3><div class="widget-content"><a href="/tags/aop/" style="font-size: 10px">AOP</a> <a href="/tags/algorithm/" style="font-size: 18.33px">Algorithm</a> <a href="/tags/analysis/" style="font-size: 10px">Analysis</a> <a href="/tags/angularjs/" style="font-size: 15px">AngularJS</a> <a href="/tags/animation/" style="font-size: 10px">Animation</a> <a href="/tags/architecture/" style="font-size: 16.67px">Architecture</a> <a href="/tags/archives/" style="font-size: 10.83px">Archives</a> <a href="/tags/async/" style="font-size: 12.5px">Async</a> <a href="/tags/backbone/" style="font-size: 10px">Backbone</a> <a href="/tags/browsers/" style="font-size: 10px">Browsers</a> <a href="/tags/css/" style="font-size: 12.5px">CSS</a> <a href="/tags/css3/" style="font-size: 10px">CSS3</a> <a href="/tags/closure/" style="font-size: 10.83px">Closure</a> <a href="/tags/closures/" style="font-size: 10px">Closures</a> <a href="/tags/cookies/" style="font-size: 10px">Cookies</a> <a href="/tags/cross-domain/" style="font-size: 10px">Cross Domain</a> <a href="/tags/custom-elements/" style="font-size: 10.83px">Custom Elements</a> <a href="/tags/d3/" style="font-size: 10px">D3</a> <a href="/tags/debounce/" style="font-size: 10px">Debounce</a> <a href="/tags/debug/" style="font-size: 10.83px">Debug</a> <a href="/tags/dependency/" style="font-size: 10px">Dependency</a> <a href="/tags/document/" style="font-size: 10px">Document</a> <a href="/tags/ecma-262-3/" style="font-size: 15.83px">ECMA-262-3</a> <a href="/tags/ecmascript/" style="font-size: 15.83px">ECMAScript</a> <a href="/tags/es6/" style="font-size: 20px">ES6</a> <a href="/tags/errors/" style="font-size: 10px">Errors</a> <a href="/tags/essential/" style="font-size: 10px">Essential</a> <a href="/tags/evaluation-strategy/" style="font-size: 10px">Evaluation strategy</a> <a href="/tags/event/" style="font-size: 10px">Event</a> <a href="/tags/exceptions/" style="font-size: 10px">Exceptions</a> <a href="/tags/express/" style="font-size: 10px">Express</a> <a href="/tags/flip/" style="font-size: 10px">FLIP</a> <a href="/tags/flexbox/" style="font-size: 10px">Flexbox</a> <a href="/tags/funarg/" style="font-size: 10px">Funarg</a> <a href="/tags/gist/" style="font-size: 10px">Gist</a> <a href="/tags/github/" style="font-size: 10px">Github</a> <a href="/tags/guide/" style="font-size: 10px">Guide</a> <a href="/tags/html/" style="font-size: 10px">HTML</a> <a href="/tags/http/" style="font-size: 10px">HTTP</a> <a href="/tags/hexo/" style="font-size: 10.83px">Hexo</a> <a href="/tags/ie/" style="font-size: 10px">IE</a> <a href="/tags/iife/" style="font-size: 10px">IIFE</a> <a href="/tags/jshint/" style="font-size: 10px">JSHint</a> <a href="/tags/javascript/" style="font-size: 19.17px">JavaScript</a> <a href="/tags/leak/" style="font-size: 10px">Leak</a> <a href="/tags/linting/" style="font-size: 10px">Linting</a> <a href="/tags/mvc/" style="font-size: 10px">MVC</a> <a href="/tags/methodology/" style="font-size: 10px">Methodology</a> <a href="/tags/mock/" style="font-size: 10px">Mock</a> <a href="/tags/modular/" style="font-size: 10px">Modular</a> <a href="/tags/mongodb/" style="font-size: 10px">MongoDB</a> <a href="/tags/oop/" style="font-size: 10.83px">OOP</a> <a href="/tags/partial-application/" style="font-size: 10px">Partial Application</a> <a href="/tags/pattern/" style="font-size: 10px">Pattern</a> <a href="/tags/patterns/" style="font-size: 10px">Patterns</a> <a href="/tags/performance/" style="font-size: 14.17px">Performance</a> <a href="/tags/promise/" style="font-size: 13.33px">Promise</a> <a href="/tags/prototype/" style="font-size: 11.67px">Prototype</a> <a href="/tags/quality/" style="font-size: 10px">Quality</a> <a href="/tags/quiz/" style="font-size: 10px">Quiz</a> <a href="/tags/regex/" style="font-size: 10px">Regex</a> <a href="/tags/requirejs/" style="font-size: 10px">RequireJS</a> <a href="/tags/sass/" style="font-size: 10px">SASS</a> <a href="/tags/svg/" style="font-size: 10px">SVG</a> <a href="/tags/scope/" style="font-size: 10.83px">Scope</a> <a href="/tags/shapes/" style="font-size: 10px">Shapes</a> <a href="/tags/shuffle/" style="font-size: 10px">Shuffle</a> <a href="/tags/sort/" style="font-size: 17.5px">Sort</a> <a href="/tags/source-map/" style="font-size: 10.83px">Source Map</a> <a href="/tags/styling/" style="font-size: 10px">Styling</a> <a href="/tags/sublime-text/" style="font-size: 10px">Sublime Text</a> <a href="/tags/template/" style="font-size: 10px">Template</a> <a href="/tags/throttle/" style="font-size: 10px">Throttle</a> <a href="/tags/timing/" style="font-size: 10px">Timing</a> <a href="/tags/tools/" style="font-size: 12.5px">Tools</a> <a href="/tags/variable-object/" style="font-size: 10px">Variable object</a> <a href="/tags/visualizations/" style="font-size: 10px">Visualizations</a> <a href="/tags/when/" style="font-size: 12.5px">When</a> <a href="/tags/delete/" style="font-size: 10px">delete</a> <a href="/tags/execution-context/" style="font-size: 10px">execution context</a> <a href="/tags/fetch/" style="font-size: 10px">fetch</a> <a href="/tags/function/" style="font-size: 10px">function</a> <a href="/tags/nodejs/" style="font-size: 10px">nodejs</a> <a href="/tags/nodemon/" style="font-size: 10px">nodemon</a> <a href="/tags/npm/" style="font-size: 10px">npm</a> <a href="/tags/nvm/" style="font-size: 10px">nvm</a> <a href="/tags/performance/" style="font-size: 10px">performance</a> <a href="/tags/prebrowsing/" style="font-size: 10px">prebrowsing</a> <a href="/tags/prefetching/" style="font-size: 10px">prefetching</a> <a href="/tags/preloading/" style="font-size: 10px">preloading</a> <a href="/tags/tabindex/" style="font-size: 10px">tabindex</a> <a href="/tags/this/" style="font-size: 10px">this</a> <a href="/tags/ui-router/" style="font-size: 14.17px">ui-router</a></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-content"><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/01/18/debouncing-throttling-explained-examples/">实例解析防抖和节流函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/08/quick-tip-multiple-versions-node-nvm/">使用 nvm 管理不同版本的 node 与 npm</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/08/15-ways-to-write-self-documenting-javascript/">如何编写更加自解释的代码</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/31/high-performance-animations/">使用 FLIP 来提高 Web 动画的性能</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/28/styling-broken-images/">定制图片加载失败时的样式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/26/delivering-octicons-with-svg/">使用 SVG 输出 Octicon</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/18/how-to-use-npm-as-a-build-tool/">如何将 npm 作为构建工具使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/24/what-you-can-do-with-gists-on-github/">任何人都可以使用到的 Gist 服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/19/prefetching-preloading-prebrowsing/">前端性能优化 - 资源预加载</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/18/es6-in-depth-the-future/">深入解析 ES6：未来展望</a></li></ul></div></div></aside><aside id="topic-wrap" class="toc-wrap f-right"><h3 class="toc-wrap-title">内容</h3><div class="toc-tree"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#介绍"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#战况"><span class="toc-number">2.</span> <span class="toc-text">战况</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#黑色小鸟的攻击力"><span class="toc-number">3.</span> <span class="toc-text">黑色小鸟的攻击力</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#猪猪偷走了什么"><span class="toc-number">4.</span> <span class="toc-text">猪猪偷走了什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#乱成一团的蠕虫大杂烩"><span class="toc-number">5.</span> <span class="toc-text">乱成一团的蠕虫大杂烩</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#backbonejs-基础"><span class="toc-number">6.</span> <span class="toc-text">Backbone.js 基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#重构紧耦合的代码"><span class="toc-number">7.</span> <span class="toc-text">重构紧耦合的代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#requirejs"><span class="toc-number">7.1.</span> <span class="toc-text">RequireJS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#mainjs"><span class="toc-number">7.1.1.</span> <span class="toc-text">main.js</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模型"><span class="toc-number">7.2.</span> <span class="toc-text">模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#moviejs"><span class="toc-number">7.2.1.</span> <span class="toc-text">movie.js</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#集合"><span class="toc-number">7.3.</span> <span class="toc-text">集合</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#moviesjs"><span class="toc-number">7.3.1.</span> <span class="toc-text">movies.js</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#视图"><span class="toc-number">7.4.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#search-viewjs"><span class="toc-number">7.4.1.</span> <span class="toc-text">search-view.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#movie-viewjs"><span class="toc-number">7.4.2.</span> <span class="toc-text">movie-view.js</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#movie-templatehtml"><span class="toc-number">7.4.3.</span> <span class="toc-text">movie-template.html</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#附加资源"><span class="toc-number">8.</span> <span class="toc-text">附加资源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#进攻"><span class="toc-number">9.</span> <span class="toc-text">进攻</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结论"><span class="toc-number">10.</span> <span class="toc-text">结论</span></a></li></ol></div><div class="toc-progress"></div></aside></div><footer id="footer" class="inner"><span class="copyright">© 2017 bubkoo</span><span class="theme">@<a href="https://github.com/bubkoo/hexo-theme-formula" target="_blank">formula</a></span></footer><img id="go2top" src="/images/top_arrow.png" alt="go2top"><script charset="utf-8" src="/js/lib/jquery-2.1.3.min.js"></script><script charset="utf-8" src="/js/lib/jquery.imagesloaded.min.js"></script><script charset="utf-8" src="/fancybox/jquery.fancybox.pack.js"></script><script charset="utf-8" src="/js/lib/sea.js"></script><script charset="utf-8" src="/js/main.js"></script></body></html>